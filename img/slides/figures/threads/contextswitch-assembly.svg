<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="839.14062"
   height="639.44336"
   viewBox="0 0 839.14062 639.44336"
   id="svg2"
   version="1.1"
   inkscape:version="0.48.2 r9819"
   sodipodi:docname="contextswitch-assembly.svg">
  <defs
     id="defs4" />
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="0.98994949"
     inkscape:cx="442.41206"
     inkscape:cy="102.66675"
     inkscape:document-units="px"
     inkscape:current-layer="layer1"
     showgrid="false"
     fit-margin-top="0"
     fit-margin-left="0"
     fit-margin-right="0"
     fit-margin-bottom="0"
     inkscape:window-width="1920"
     inkscape:window-height="1032"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="0" />
  <metadata
     id="metadata7">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(-2.7589331e-6,-285.67746)">
    <text
       xml:space="preserve"
       style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"
       x="112.12693"
       y="106.35008"
       id="text2985"
       sodipodi:linespacing="125%"
       transform="translate(0,284.36218)"><tspan
         sodipodi:role="line"
         x="112.12693"
         y="106.35008"
         id="tspan2997" /></text>
    <text
       xml:space="preserve"
       style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"
       x="-4.4419863e-08"
       y="299.79855"
       id="text3019"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="299.79855"
         id="tspan3029"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold">   /*</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="324.79855"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3005">    * At this point:</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="349.79855"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3007">    *      Interrupts are off. (The processor did this for us.)</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="374.79855"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3009">    *      k0 contains the value for curthread, to go into s7.</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="399.79855"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3011">    *      k1 contains the old stack pointer.</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="424.79855"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3013">    *      sp points into the kernel stack.</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="449.79855"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3015">    *      All other registers are untouched.</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="474.79855"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3017">    */</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="499.79855"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3019" /><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="524.79858"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3021">   /*</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="549.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3023">    * Allocate stack space for 37 words to hold the trap frame,</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="574.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3025">    * plus four more words for a minimal argument block, plus</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="599.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3027">    * one more for proper (64-bit) stack alignment.</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="624.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3030">    */</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="649.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3032">   addi sp, sp, -168</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="674.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3048" /><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="699.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3036">  /* </tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="724.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3038">    * Save general registers.</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="749.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3040">    * We exclude k0/k1, which the kernel is free to clobber (and which</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="774.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3042">    * we already have clobbered), and $0, whose value is fixed.</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="799.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3044">    *</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="824.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3050">...</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="849.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3052">   sw t9, 136(sp)</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="874.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3054">   sw t8, 132(sp)</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="899.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3074">   sw s7, 128(sp)</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="924.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3076">...</tspan><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="949.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3046" /><tspan
         sodipodi:role="line"
         x="-4.4419863e-08"
         y="974.79852"
         style="font-size:20px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Courier New;-inkscape-font-specification:Courier New Bold"
         id="tspan3034" /></text>
    <rect
       style="opacity:0.27155175;fill:#00ff00;fill-opacity:1;stroke:none"
       id="rect3050"
       width="381.83768"
       height="32.324883"
       x="364.66507"
       y="525.13171" />
    <rect
       y="702.91858"
       x="47.477169"
       height="32.324883"
       width="306.07623"
       id="rect3078"
       style="opacity:0.27155175;fill:#00ff00;fill-opacity:1;stroke:none" />
    <rect
       style="opacity:0.27155175;fill:#00ff00;fill-opacity:1;stroke:none"
       id="rect3080"
       width="201.02037"
       height="80.812195"
       x="19.192898"
       y="828.17749" />
  </g>
</svg>
